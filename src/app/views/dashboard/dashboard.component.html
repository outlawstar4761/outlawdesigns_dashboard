<div class="animated fadeIn">
  <div class="row">
    <div class="col-sm-6 col-lg-3" *ngFor="let host of _hosts">
      <div [ngClass]="host._tileClass">
        <div class="card-body pb-0">
          <button type="button" class="btn btn-transparent p-0 float-right">
            <i class="icon-settings"></i>
          </button>
          <div class="text-value">{{host.friendlyLabel}}</div>
          <div>{{host.label}}:{{host.port}}</div>
          <div class="chart-wrapper mt-3 mx-3" style="height:70px;">
            <canvas baseChart class="chart"
            [datasets]="host._chartData"
            [labels]="dailyRequestLabels"
            [options]="lineChartOptions"
            [colors]="host._chartColors"
            [legend]="lineChartLegend"
            [chartType]="lineChartType"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div><!--/.row-->
  <div class="card">
    <div class="card-body">
      <div class="row">
        <div class="col-sm-5">
          <h4 class="card-title mb-0">Traffic</h4>
          <div class="small text-muted">{{_getMonthLabel(now.getMonth())}} {{now.getFullYear()}}</div>
        </div><!--/.col-->
        <div class="col-sm-7 d-none d-md-block">
          <button type="button" class="btn btn-primary float-right"><i class="icon-cloud-download"></i></button>
          <div class="btn-group btn-group-toggle float-right mr-3" data-toggle="buttons">
            <label class="btn btn-outline-secondary" [(ngModel)]="radioModel" btnRadio="Week" id="option1" (click)="_updateMainChart()">Week</label>
            <label class="btn btn-outline-secondary" [(ngModel)]="radioModel" btnRadio="Month" id="option2" (click)="_updateMainChart()">Month</label>
            <label class="btn btn-outline-secondary" [(ngModel)]="radioModel" btnRadio="Year" id="option3" (click)="_updateMainChart()">Year</label>
          </div>
        </div><!--/.col-->
      </div><!--/.row-->
      <div class="chart-wrapper" style="height:300px;margin-top:40px;">
        <canvas baseChart class="chart"
        [datasets]="mainChartData"
        [labels]="mainChartLabels"
        [options]="mainChartOptions"
        [colors]="mainChartColours"
        [legend]="mainChartLegend"
        [chartType]="mainChartType"></canvas>
      </div>
    </div>
    <div class="card-footer">
      <div class="row text-center">
        <div class="col-sm-12 col-md mb-sm-2 mb-0">
          <div class="text-muted">Visits</div>
          <strong>29.703 Users (40%)</strong>
          <div class="progress progress-xs mt-2">
            <div class="progress-bar bg-success" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>
        <div class="col-sm-12 col-md mb-sm-2 mb-0">
          <div class="text-muted">Unique</div>
          <strong>24.093 Users (20%)</strong>
          <div class="progress progress-xs mt-2">
            <div class="progress-bar bg-info" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>
        <div class="col-sm-12 col-md mb-sm-2 mb-0">
          <div class="text-muted">Pageviews</div>
          <strong>78.706 Views (60%)</strong>
          <div class="progress progress-xs mt-2">
            <div class="progress-bar bg-warning" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>
        <div class="col-sm-12 col-md mb-sm-2 mb-0">
          <div class="text-muted">New Users</div>
          <strong>22.123 Users (80%)</strong>
          <div class="progress progress-xs mt-2">
            <div class="progress-bar bg-danger" role="progressbar" style="width: 80%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>
        <div class="col-sm-12 col-md mb-sm-2 mb-0">
          <div class="text-muted">Bounce Rate</div>
          <strong>40.15%</strong>
          <div class="progress progress-xs mt-2">
            <div class="progress-bar" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--/.card-->
  <div class="row">
    <div class="col-sm-6 col-lg-3">
      <div class="brand-card">
        <div class="brand-card-header bg-facebook">
          <i class="fa fa-facebook"></i>
          <div class="chart-wrapper">
            <canvas baseChart class="chart"
            [datasets]="brandBoxChartData1"
            [labels]="brandBoxChartLabels"
            [options]="brandBoxChartOptions"
            [colors]="brandBoxChartColours"
            [legend]="brandBoxChartLegend"
            [chartType]="brandBoxChartType"></canvas>
          </div>
        </div>
        <div class="brand-card-body">
          <div>
            <div class="text-value">89k</div>
            <div class="text-uppercase text-muted small">friends</div>
          </div>
          <div>
            <div class="text-value">459</div>
            <div class="text-uppercase text-muted small">feeds</div>
          </div>
        </div>
      </div>
    </div><!--/.col-->
    <div class="col-sm-6 col-lg-3">
      <div class="brand-card">
        <div class="brand-card-header bg-twitter">
          <i class="fa fa-twitter"></i>
          <div class="chart-wrapper">
            <canvas baseChart class="chart"
            [datasets]="brandBoxChartData2"
            [labels]="brandBoxChartLabels"
            [options]="brandBoxChartOptions"
            [colors]="brandBoxChartColours"
            [legend]="brandBoxChartLegend"
            [chartType]="brandBoxChartType"></canvas>
          </div>
        </div>
        <div class="brand-card-body">
          <div>
            <div class="text-value">973k</div>
            <div class="text-uppercase text-muted small">followers</div>
          </div>
          <div>
            <div class="text-value">1.792</div>
            <div class="text-uppercase text-muted small">tweets</div>
          </div>
        </div>
      </div>
    </div><!--/.col-->
    <div class="col-sm-6 col-lg-3">
      <div class="brand-card">
        <div class="brand-card-header bg-linkedin">
          <i class="fa fa-linkedin"></i>
          <div class="chart-wrapper">
            <canvas baseChart class="chart"
            [datasets]="brandBoxChartData3"
            [labels]="brandBoxChartLabels"
            [options]="brandBoxChartOptions"
            [colors]="brandBoxChartColours"
            [legend]="brandBoxChartLegend"
            [chartType]="brandBoxChartType"></canvas>
          </div>
        </div>
        <div class="brand-card-body">
          <div>
            <div class="text-value">500+</div>
            <div class="text-uppercase text-muted small">contacts</div>
          </div>
          <div>
            <div class="text-value">292</div>
            <div class="text-uppercase text-muted small">feeds</div>
          </div>
        </div>
      </div>
    </div><!--/.col-->
    <div class="col-sm-6 col-lg-3">
      <div class="brand-card">
        <div class="brand-card-header bg-google-plus">
          <i class="fa fa-google-plus"></i>
          <div class="chart-wrapper">
            <canvas baseChart class="chart"
            [datasets]="brandBoxChartData4"
            [labels]="brandBoxChartLabels"
            [options]="brandBoxChartOptions"
            [colors]="brandBoxChartColours"
            [legend]="brandBoxChartLegend"
            [chartType]="brandBoxChartType"></canvas>
          </div>
        </div>
        <div class="brand-card-body">
          <div>
            <div class="text-value">894</div>
            <div class="text-uppercase text-muted small">followers</div>
          </div>
          <div>
            <div class="text-value">92</div>
            <div class="text-uppercase text-muted small">circles</div>
          </div>
        </div>
      </div>
    </div><!--/.col-->
  </div><!--/.row-->
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          Library of Everything
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-sm-6">
              <div class="row">
                <div class="col-sm-6">
                  <div class="callout callout-info">
                    <small class="text-muted">Movies</small>
                    <br>
                    <strong class="h4">{{loeCounts.movie}}, {{streamingTotals.movie}}</strong>
                  </div>
                </div><!--/.col-->
                <div class="col-sm-6">
                  <div class="callout callout-danger">
                    <small class="text-muted">Songs</small>
                    <br>
                    <strong class="h4">{{loeCounts.song}}, {{streamingTotals.song}}</strong>
                  </div>
                </div><!--/.col-->
              </div><!--/.row-->
              <hr class="mt-0">
              <h4>Weekly Streaming</h4>
              <div class="progress-group mb-4" *ngFor="let day of weeklyStreaming | keyvalue">
                <div class="progress-group-prepend">
                  <span class="progress-group-text">
                    {{day.key}}
                  </span>
                </div>
                <div class="progress-group-bars">
                  <div class="progress progress-xs">
                    <div class="progress-bar bg-info" role="progressbar" [ngStyle]="{'width':day.value.movie + '%'}" aria-valuenow="day.value.movie" aria-valuemin="0" aria-valuemax="streamingTotals.movie"></div>
                  </div>
                  <div class="progress progress-xs">
                    <div class="progress-bar bg-danger" role="progressbar" [ngStyle]="{'width':day.value.song + '%'}" aria-valuenow="day.value.song" aria-valuemin="0" aria-valuemax="streamingTotals.song"></div>
                  </div>
                  <div class="progress progress-xs">
                    <div class="progress-bar bg-warning" role="progressbar" [ngStyle]="{'width':day.value.episode + '%'}" aria-valuenow="day.value.episode" aria-valuemin="0" aria-valuemax="streamingTotals.episode"></div>
                  </div>
                  <div class="progress progress-xs">
                    <div class="progress-bar bg-success" role="progressbar" [ngStyle]="{'width':day.value.doc + '%'}" aria-valuenow="day.value.doc" aria-valuemin="0" aria-valuemax="streamingTotals.doc"></div>
                  </div>
                </div>
              </div>
            </div><!--/.col-->
            <div class="col-sm-6">
              <div class="row">
                <div class="col-sm-6">
                  <div class="callout callout-warning">
                    <small class="text-muted">Episodes</small>
                    <br>
                    <strong class="h4">{{loeCounts.episode}}, {{streamingTotals.episode}}</strong>
                  </div>
                </div><!--/.col-->
                <div class="col-sm-6">
                  <div class="callout callout-success">
                    <small class="text-muted">Docs</small>
                    <br>
                    <strong class="h4">{{loeCounts.doc}}, {{streamingTotals.doc}}</strong>
                  </div>
                </div><!--/.col-->
              </div><!--/.row-->
              <hr class="mt-0">
              <div class="card">
                <div class="card-header">
                  Outreach Torrent Server
                  <sub style="float:right">
                    <span [ngClass]="_wampConnection.session.isOpen ? 'icon-check success':'icon-close danger'"></span>
                  </sub>
                </div>
                <div class="row">
                  <div class="col-sm-12">
                    <ul class="list-group">
                      <li class="list-group-item"><b>Settings</b></li>
                      <li class="list-group-item">Public IP Address: {{_outreachIp}}</li>
                      <li class="list-group-item">Daemon Version: {{_torrentInfo.version.daemonVersion}}</li>
                      <li class="list-group-item">Rpc Version: {{_torrentInfo.version.rpcVersion}}</li>
                      <li class="list-group-item">Download Dir: {{_torrentInfo.config.downloadDir}}</li>
                      <li class="list-group-item">Listening Port: {{_torrentInfo.config.listenPort}}</li>
                      <li class="list-group-item">Config Dir: {{_torrentInfo.config.configDir}}</li>
                    </ul>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-6">
                    <ul class="list-group">
                      <li class="list-group-item"><b>Current Session</b></li>
                      <li class="list-group-item"><span class="icon-cloud-upload"></span> {{_torrentStats.current.upload}}</li>
                      <li class="list-group-item"><span class="icon-cloud-download"></span> {{_torrentStats.current.download}}</li>
                      <li class="list-group-item"><span class="icon-directions"></span> {{_torrentStats.current.ratio}}</li>
                      <li class="list-group-item"><span class="icon-calendar"></span> {{_torrentStats.current.duration}}</li>
                    </ul>
                  </div>
                  <div class="col-sm-6">
                    <ul class="list-group">
                      <li class="list-group-item"><b>All Time</b></li>
                      <li class="list-group-item"><span class="icon-cloud-upload"></span> {{_torrentStats.total.upload}}</li>
                      <li class="list-group-item"><span class="icon-cloud-download"></span> {{_torrentStats.total.download}}</li>
                      <li class="list-group-item"><span class="icon-directions"></span> {{_torrentStats.total.ratio}}</li>
                      <li class="list-group-item"><span class="icon-calendar"></span> {{_torrentStats.total.duration}}</li>
                      <li class="list-group-item"><span class="icon-refresh"></span> {{_torrentStats.total.starts}}</li>
                    </ul>
                  </div>
                </div>
              </div>
              <!-- {{_outreachIp}} -->
              <!-- <div class="chart-wrapper mt-3 mx-3">
                <canvas baseChart class="chart"
                [datasets]="musicGenreData"
                [labels]="weeklyMusicGenreLabels"
                [options]="brandBoxChartOptions"
                [colors]="genreChartColors"
                [legend]="brandBoxChartLegend"
                [chartType]="genreChartType"></canvas>
              </div> -->
            </div><!--/.col-->
          </div><!--/.row-->
          <br>
          <h4>Torrents</h4>
          <table class="table table-responsive-sm table-hover table-outline mb-0">
            <thead class="thead-light">
              <tr>
                <th class="text-center">Id</th>
                <th>Name</th>
                <th class="text-center">Status</th>
                <th>Downloaded</th>
                <th class="text-center">Up</th>
                <th>Down</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let torrent of _outreachTorrents">
                <td class="text-center">
                  <div>
                    {{torrent.id}}
                  </div>
                </td>
                <td>
                  <div>{{torrent.name}}</div>
                  <div class="small text-muted">
                    <a (click)="_startTorrent(torrent.id)">Start</a>
                    | <a (click)="_stopTorrent(torrent.id)">Stop</a>
                    | <a (click)="_removeTorrent(torrent.id)">Remove</a>
                    | <a (click)="_radTorrent(torrent.id)">RAD</a>
                  </div>
                </td>
                <td class="text-center">
                  {{torrent.status}}
                </td>
                <td>
                  <div class="clearfix">
                    <div class="float-left">
                      <strong>{{torrent.done}}</strong>
                    </div>
                    <div class="float-right">
                      <small class="text-muted">{{torrent.eta}}</small>
                    </div>
                  </div>
                  <div class="progress progress-xs">
                    <div class="progress-bar bg-success" role="progressbar" [ngStyle]="{'width':torrent.done}" aria-valuenow="parseInt(torrent.done)" aria-valuemin="0" aria-valuemax="100"></div>
                  </div>
                </td>
                <td class="text-center">
                  {{torrent.up}}
                </td>
                <td>
                  {{torrent.down}}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div><!--/.col-->
  </div><!--/.row-->
</div>
